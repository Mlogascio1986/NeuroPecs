<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Include Head -->
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/partials.css">
    <link rel="stylesheet" href="/css/register.css">
</head>

<body>
	<!-- Header -->
	<%- include('partials/header') %>
	<!-- /Header -->

	<main>
        <br>
        <br>
        <!------- Formulario ---------->
        <div class="form-container">
        <h2 class="register-title">Formulario de Edicion De Productos</h2>
        <form class="register-form" action="/products/edit/<%= productToEdit.id %>?_method=PUT" method="POST" enctype="multipart/form-data" id="productEdit-form">				
            <div class="form-div">
                <label for="name" class="form-label">Nombre del producto:</label>
                <input type="text" id="name" name="name" 
                value="<%= locals.oldData ? oldData.name : productToEdit.name %>"
                class="form-input">
            </div>
            <div class="errorValidacion" id="nameError"></div>
            <% if (locals.errors && errors.name) { %>
                <div class="errorValidacion">
                    <p><%= errors.name.msg %></p>
                </div> 
            <% } %>
            <div class="form-div">
                <label for="categoryId" class="form-label">Categoria:</label>
                <select name="categoryId" id="">
                    <% categories.forEach(category => { %>
                     <option value="<%= category.id %>"><%= category.nameCategory %> </option>
                    <% }) %>
                </select>
                <!--<input type="bodega" id="bodega" name="bodega" 
                value="<%= //locals.oldData ? oldData.bodega : productToEdit.Bodega.nameBodega %>"
                class="form-input">-->
            </div>
            <% if (locals.errors && errors.category) { %>
                <div class="errorValidacion">
                    <p><%= errors.category.msg %></p>
                </div> 
            <% } %>
            <div class="form-div">
                <label for="price" class="form-label">Precio del producto:</label>
                <input type="number" id="price" name="price"   
                value="<%= locals.oldData ? oldData.price : productToEdit.price %>" 
                class="form-input">
            </div>
            <% if (locals.errors && errors.price) { %>
                <div class="errorValidacion">
                    <p><%= errors.price.msg %></p>
                </div> 
            <% } %>
            <div class="form-div">
                <label for="discount" class="form-label">Descuento:</label>
                <input type="number" id="discount" name="discount" min="0" max="1" step="0.01" 
                value=<%= productToEdit.discount %>  
                class="form-input">
            </div>
            <div class="form-div">
                <label for="image" class="form-label">Foto:</label>
                <input type="file" id="image" accept=".png, .jpeg, .jpg" 
                name="image" placeholder="Ingrese una foto" class="form-input" 
                value="<%=productToEdit.Imagesproducts[0].nameImage %>"  multiple>
                
            </div>
            <div class="errorValidacion" id="imageError"></div>
            <% if (locals.errors && errors.image) { %>
                <div class="errorValidacion">
                    <p><%= errors.image.msg %></p>
                </div> 
            <% } %>
            <div class="form-div">
                <label for="description" class="form-label">Descripci√≥n:</label>
                <textarea name="description" id="description" class="form-input"><%= locals.oldData ? oldData.description :productToEdit.description%></textarea>
            </div>
            <div class="errorValidacion" id="descriptionError"></div>
            <div class="form-buttons">
                <button type="submit">Guardar producto</button>
                <button type="reset" class="reset-button">Limpiar</button>
            </div>
    </form>
    <br><br><br>
    </div>
       
        <br>
    </main> 

	<!-- footer -->
	<%- include('partials/footer') %>
	<!-- /footer -->
    <script src="/js/productEditValidation.js"></script>
</body>	
</html>